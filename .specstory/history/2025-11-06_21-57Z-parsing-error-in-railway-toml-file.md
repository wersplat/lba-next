<!-- Generated by SpecStory, Markdown v2.0.0 -->

<!-- cursor Session 19b43f2d-3e64-42d1-b303-dd716c3e0525 (2025-11-06 21:57Z) -->

# Parsing error in railway.toml file (2025-11-06 21:57Z)

_**User (2025-11-06 21:57Z)**_

failed to parse railway.toml: failed to decode toml file: toml: line 14 (last key "build.prebuild"): expected '.' or '=', but got '"' instead

---

_**Agent (model composer-1, mode Agent)**_



---


Checking `railway.toml` for the syntax error.


---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Volumes/870SSD/Active GH Projects/lba-next/railway.toml</summary>

</details>
</tool-use>

---



---


Fixing the `[build.prebuild]` section: TOML doesn't support YAML-style dashes. Converting it to a TOML array.


---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **code_edit** • Edit file: /Volumes/870SSD/Active GH Projects/lba-next/railway.toml</summary>

**Chunk 1**
Lines added: 1, lines removed: undefined

```diff
@@ -4,4 +4,5 @@
    installCommand = &quot;npm install&quot;
    startCommand = &quot;npm run start&quot;
+   prebuild = [&quot;corepack enable&quot;, &quot;corepack prepare pnpm@latest --activate&quot;]
    
  [deploy]
```

**Chunk 2**
Lines added: undefined, lines removed: 4

```diff
@@ -10,8 +11,4 @@
  [build.environment]
    NODE_ENV = &quot;production&quot;
-   
- [build.prebuild]
-   - &quot;corepack enable&quot;
-   - &quot;corepack prepare pnpm@latest --activate&quot;
  
  [healthcheck]
```

</details>

</tool-use>

---



---


Fixed the syntax error. The `[build.prebuild]` section used YAML-style dashes, which TOML doesn't support. Converted it to a TOML array under the `[build]` section.

The `prebuild` commands are now formatted as:
```6:6:railway.toml
  prebuild = ["corepack enable", "corepack prepare pnpm@latest --activate"]
```

This should resolve the parsing error. The file should now be valid TOML.

---

_**User (2025-11-06 21:57Z)**_

[stage-0  8/10] RUN --mount=type=cache,id=s/bd85d0af-bbd1-4ab7-b715-71b4c62b9219-next/cache,target=/app/.next/cache --mount=type=cache,id=s/bd85d0af-bbd1-4ab7-b715-71b4c62b9219-node_modules/cache,target=/app/node_modules/.cache npm run build



npm warn config production Use `--omit=dev` instead.





> lba-next@0.0.0 build

> next build





You are using Node.js 18.20.5. For Next.js, Node.js version ">=20.9.0" is required.

---

_**Agent (model composer-1, mode Agent)**_



---


Checking `railway.toml` and `package.json` to set the Node.js version to >=20.9.0.


---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Volumes/870SSD/Active GH Projects/lba-next/railway.toml</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** • Read file: /Volumes/870SSD/Active GH Projects/lba-next/package.json</summary>

</details>
</tool-use>

---



---


Adding `NODE_VERSION` to the build environment to use Node.js >=20.9.0:


---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **code_edit** • Edit file: /Volumes/870SSD/Active GH Projects/lba-next/railway.toml</summary>

**Chunk 1**
Lines added: 1, lines removed: undefined

```diff
@@ -11,4 +11,5 @@
  [build.environment]
    NODE_ENV = &quot;production&quot;
+   NODE_VERSION = &quot;20&quot;
  
  [healthcheck]
```

</details>

</tool-use>

---



---


Added `NODE_VERSION = "20"` to the build environment in `railway.toml`. This tells Railway to use Node.js 20.x (latest 20.x), which satisfies Next.js's requirement of >=20.9.0.

The build should now use Node.js 20 instead of 18.20.5. Railway will pick this up on the next deployment.

---

